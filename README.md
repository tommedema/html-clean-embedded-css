# html-clean-embedded-css

Expects html, removes redundant css within style tags, and returns html.

This module currently exports an async function because one of its dependencies is expecting an asynchronous operation (reading from file system). This module does not actually use the file system, so this should not be necessary. This could be resolved in the future by patching `css-razor` to not be async if the file system is not accessed.

[![JavaScript Style Guide](https://cdn.rawgit.com/standard/standard/master/badge.svg)](https://github.com/standard/standard)

## Install

```bash
npm install --save html-clean-embedded-css
# or yarn add html-clean-embedded-css
```

## Running tests

```bash
npm test
```

## Rebuilding API documentation

```bash
npm run docs
```

This will append to `README.md` by default.

<!-- Generated by documentation.js. Update this documentation by updating the source code. -->

### API documentation

-   [cleanEmbeddedCss](#cleanembeddedcss)

## cleanEmbeddedCss

Expects html, removes redundant css within style tags, and returns html. The output HTML
document should render the same as the input, but with less css rules present.
This is primarily useful if you reduce the number of requests to your web application by
embedding your css into a single HTML document instead of a separate stylesheet document,
and if you intend to optimize the CSS in that document after embedding it into the HTML document.

**Parameters**

-   `html` **[string](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/String)** The HTML document to parse style tags from.

**Examples**

```javascript
(async () {
 const redundantCssHtml = `<html><head><style>.one { color: green } .two { color: red }</style>
 </head><body><p class="one">nobody uses class two</p></body></html>`
 const cleanCssHtml = await cleanEmbeddedCss(redundantCssHtml)
 console.log(cleanCssHtml === `<html><head><style>.one { color: green }</style></head>
 <body><p class="one">nobody uses class two</p></body></html>`) // true
})()
```

Returns **[string](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/String)** html - the input HTML document but with embedded style tags having
redundant css rules removed.
